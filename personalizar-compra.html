 <!DOCTYPE html>
<html lang="es">
<head>
     <div class="header-container">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalizar Compra - GUZZOCORP</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* ESTILOS PARA LA ESTRUCTURA GRID */
        .product-grid {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 30px;
            align-items: start;
        }
        
        .product-image-section {
            grid-column: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-section {
            grid-column: 2;
        }
        
        .summary-section {
            grid-column: 3;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .producto-imagen-container {
            position: relative;
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .producto-img {
            max-width: 100%;
            max-height: 400px;
            object-fit: contain;
            z-index: 1;
        }
        
        .estampa-img {
            position: absolute;
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
            z-index: 2;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .size-guide-container {
            width: 100%;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
            
            .product-image-section,
            .form-section,
            .summary-section {
                grid-column: 1;
            }
            
            .summary-section {
                order: 3;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="GuzzoCorp.png" alt="GUZZOCORP" class="logo">
            <span class="logo-text">GUZZO CORPORATION</span>
        </div>
        <nav>
            <a href="inicio.html"><i class="fas fa-home"></i> Inicio</a>
            <a href="index.html"><i class="fas fa-tshirt"></i> Tienda</a>
            <a href="catalogo.html"><i class="fas fa-search"></i> Cat√°logo</a>
            <a href="encargos.html"><i class="fas fa-star"></i> Encargos</a>
            <a href="#contacto"><i class="fas fa-envelope"></i> Contacto</a>
        </nav>
        <div class="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </div>
    </header>
    
    <div class="personalizar-container">
        <h1 class="titulo-centrado">Personaliza tu compra</h1>
        
        <!-- CONTENEDOR PRINCIPAL CON GRID -->
        <div class="product-grid">
            <!-- COLUMNA 1: IMAGEN Y GU√çA DE TALLES -->
            <div class="product-image-section">
                <div class="producto-imagen-container">
                    <img id="producto-imagen" src="" alt="Producto" class="producto-img">
                    <img id="producto-estampa" src="" alt="Estampa" class="estampa-img" style="display: none;">
                </div>
                
                <!-- GU√çA DE TALLES -->
                <div class="size-guide-container">
                    <div class="guia-talles-container">
                        <div class="guia-talles-trigger" onclick="toggleGuiaTalles()">
                            <i class="fas fa-ruler-combined"></i> Gu√≠a de talles
                            <i class="fas fa-chevron-down" id="guia-icon"></i>
                        </div>
                        
                        <div class="guia-talles-content" id="guia-talles-content">
                            <div class="guia-header">
                                <h4><i class="fas fa-ruler-combined"></i> C√≥mo medir tu cuerpo</h4>
                                <p>Segu√≠ estos pasos para elegir tu talle correcto:</p>
                            </div>
                            <div class="pasos-medida">
                                <div class="paso">
                                    <div class="paso-icono"><i class="fas fa-tshirt"></i></div>
                                    <div class="paso-texto">
                                        <strong>Pecho:</strong> Med√≠ alrededor de la parte m√°s ancha de tu torso, manteniendo la cinta m√©trica horizontal.
                                    </div>
                                </div>
                                <div class="paso">
                                    <div class="paso-icono"><i class="fas fa-arrow-down"></i></div>
                                    <div class="paso-texto">
                                        <strong>Cintura:</strong> Med√≠ donde normalmente us√°s el cintur√≥n o pantalon, sin ajustar demasiado.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="tabla-container">
                                <h5>Tabla de Talles (en cent√≠metros)</h5>
                                <table class="tabla-talles">
                                    <thead>
                                        <tr>
                                            <th>Talle</th>
                                            <th>Pecho</th>
                                            <th>Cintura</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>S</td>
                                            <td>90-95</td>
                                            <td>75-80</td>
                                        </tr>
                                        <tr>
                                            <td>M</td>
                                            <td>95-100</td>
                                            <td>80-85</td>
                                        </tr>
                                        <tr>
                                            <td>L</td>
                                            <td>100-105</td>
                                            <td>85-90</td>
                                        </tr>
                                        <tr>
                                            <td>XL</td>
                                            <td>105-110</td>
                                            <td>90-95</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="guia-nota">
                                <i class="fas fa-info-circle"></i>
                                <p>Si tus medidas est√°n entre dos talles, te recomendamos elegir el talle m√°s grande.</p>
                            </div>
                            
                            <div class="guia-ayuda">
                                <a href="https://wa.me/5492664008408" target="_blank" class="btn-ayuda">
                                    <i class="fab fa-whatsapp"></i> ¬øNecesit√°s ayuda?
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- COLUMNA 2: FORMULARIO -->
            <div class="form-section">
                <div class="producto-seleccion">
                    <h2 id="producto-nombre"></h2>
                    <p id="producto-precio" class="precio"></p>
                    <p id="producto-descripcion" class="descripcion"></p>
                    
                    <div class="beneficios-compra">
                        <div class="beneficio-item">
                            <i class="fas fa-tags"></i>
                            <div>
                                <h4>¬°M√°s compras, m√°s ahorro!</h4>
                                <p>2 productos: 3% OFF | 3+ productos: 10% OFF</p>
                            </div>
                        </div>
                        <div class="beneficio-item">
                            <i class="fas fa-money-bill-wave"></i>
                            <div>
                                <h4>Efectivo: 6% de Descuento</h4>
                                <p>Pagando en efectivo</p>
                            </div>
                        </div>
                    </div>

                    <form id="form-compra">
                        <!-- Selector de calidad -->
                        <div class="selector">
                            <label for="calidad">Calidad:</label>
                            <select id="calidad" name="calidad" required>
                                <option value="regular">Regular (Alta calidad)</option>
                                <option value="premium">Premium (+19% mejor calidad)</option>
                            </select>
                        </div>
                        
                        <!-- Selecci√≥n de talle -->
                        <div class="selector">
                            <label for="talle">Talle:</label>
                            <select id="talle" name="talle" required></select>
                        </div>
                        
                        <!-- Selecci√≥n de color -->
                        <div class="selector">
                            <label for="color">Color:</label>
                            <select id="color" name="color" required></select>
                        </div>

                       <!-- Selecci√≥n de estampas -->
                        <div class="selector">
                            <label for="estampa">Estampa:</label>
                            <select id="estampa" name="estampa" required></select>
                        </div>
                        
                        <!-- Cantidad -->
                        <div class="selector">
                            <label for="cantidad">Cantidad:</label>
                            <input type="number" id="cantidad" min="1" value="1" required>
                        </div>

                        <!-- M√©todo de pago -->
                        <div class="selector">
                            <label for="metodo-pago">M√©todo de pago:</label>
                            <select id="metodo-pago" name="metodo-pago" required>
                                <option value="">Seleccionar</option>
                                <option value="Efectivo">Efectivo (6% descuento)</option>
                                <option value="Tarjeta">Tarjeta de cr√©dito</option>
                                <option value="Transferencia">Transferencia bancaria</option>
                                <option value="MercadoPago">Mercado Pago</option>
                                <option value="Cripto">Criptomonedas</option>
                            </select>
                        </div>

                        <!-- Cuotas -->
                        <div class="selector" id="cuotas-container" style="display:none;">
                            <label for="cuotas">Cuotas:</label>
                            <select id="cuotas" name="cuotas">
                                <option value="1">1 cuota (+4%)</option>
                                <option value="2">2 cuotas (+18%)</option>
                                <option value="3">3 cuotas (+23%)</option>
                                <option value="6">6 cuotas (+40%)</option>
                                <option value="9">9 cuotas (+63%)</option>
                                <option value="12">12 cuotas (+86%)</option>
                            </select>
                        </div>

                        <div class="selector">
                            <label for="notas">Notas adicionales <span class="opcional">(Opcional)</span>:</label>
                            <textarea id="notas" name="notas" rows="3"></textarea>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- COLUMNA 3: RESUMEN -->
            <div class="summary-section">
                <div class="resumen-compra">
                    <h3>Resumen de compra</h3>
                    <div id="resumen-detalle"></div>
                </div>
                <button type="submit" form="form-compra" class="btn-comprar">
                    <i class="fab fa-whatsapp"></i> Finalizar Compra
                </button>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-logo-container">
            <img src="GuzzoCorp.png" alt="GUZZOCORP" class="footer-logo">
            <span class="footer-logo-text">THE BEST STYLE</span>
        </div>
        <div class="footer-links">
            <a href="#inicio">Inicio</a>
            <a href="#sneakers">Sneakers</a>
            <a href="#ropa">Ropa</a>
            <a href="#encargos">Encargos</a>
            <a href="#contacto">Contacto</a>
        </div>
        <div class="social-links">
            <a href="https://www.instagram.com/guzzo.corp" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://wa.me/5492664008408" target="_blank"><i class="fab fa-whatsapp"></i></a>
            <a href="mailto:guzzoinbusiness@gmail.com" target="_blank"><i class="fas fa-envelope"></i></a>
        </div>
        <div class="copyright">
            &copy; 2025 GUZZOCORP - Todos los derechos reservados - By: Nahuel Guzzo
        </div>
    </footer>

<script>
    // Cargar datos del producto
    document.addEventListener('DOMContentLoaded', function() {
        // Men√∫ m√≥vil unificado (elimina el segundo DOMContentLoaded)
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const nav = document.querySelector('nav'); // Cambiado a solo 'nav' para personalizar-compra.html
        
        mobileMenuBtn.addEventListener('click', function() {
            nav.classList.toggle('show');
            
            // Cambiar √≠cono
            const icon = this.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        });
        
        // Cerrar men√∫ al hacer clic en un enlace
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function() {
                nav.classList.remove('show');
                mobileMenuBtn.querySelector('i').classList.remove('fa-times');
                mobileMenuBtn.querySelector('i').classList.add('fa-bars');
            });
        });
        
        // Mostrar/ocultar cuotas seg√∫n m√©todo de pago
        const metodoPago = document.getElementById('metodo-pago');
        const cuotasContainer = document.getElementById('cuotas-container');
        
        metodoPago.addEventListener('change', function() {
            if(this.value === 'Tarjeta') {
                cuotasContainer.style.display = 'block';
            } else {
                cuotasContainer.style.display = 'none';
            }
            actualizarResumen();
        });
        
        // Cargar producto
        const urlParams = new URLSearchParams(window.location.search);
        const productId = parseInt(urlParams.get('producto'));
        
        // Obtener producto del cat√°logo
        const producto = obtenerProducto(productId);
        
        if (producto) {
            mostrarProducto(producto);
            configurarFormulario(producto);
        } else {
            mostrarError();
        }
    });        
function obtenerProducto(id) {
    const productos = {
        1: { 
            name: "Remera T√©rmica", 
            price: 14999, 
            images: {
                "Negro": "Termica-negro.jpeg"
            }, 
            sizes: ["S", "M", "L", "XL"], 
            colors: ["Negro"] 
        },
        2: { 
            name: "Gorra", 
            price: 24999, 
            images: {
                "Elegir": "Gorras.jpeg",
                "Bulls (Negro)": "Bulls-negro.png",
                "Lakers (Negro)": "lakers-negro.png", 
                "New York (Negro)": "ny-negro.png",
                "Los Angeles (Beige)": "la-beige.png", 
                "Rocket (Rojo)": "rocket-rojo.png", 
                "Raptors (Gris)": "Raptors-gris.png"
            }, 
            sizes: ["Ajustable"], 
            colors: ["Elegir", "Bulls (Negro)", "Lakers (Negro)", "New York (Negro)", "Los Angeles (Beige)", "Rocket (Rojo)", "Raptors (Gris)"] 
        },
        3: { 
            name: "Cuellos Termicos", 
            price: 3999, 
            images: {
                "Negro": "cuello-negro.jpeg"
            }, 
            sizes: ["√önico"], 
            colors: ["Negro"] 
        },
        6: { 
            name: "Buzo canguro tela peluche", 
            price: 26999, 
            images: {
                "Gris": "assets/products/buzo-peluche.jpg"
            }, 
            sizes: ["S-M", "L-XL", "2XL-3XL"], 
            colors: ["Gris"] 
        },
        7: { 
            name: "Remera Oversize", 
            price: 17999, 
            images: {
                "Negro": "remera-negro.jpeg",
                "Blanco": "remera-blanco.jpeg",
                "Gris": "remera-gris.jpeg",
                "Marron": "remera-marron.jpeg",
                "Violeta": "remera-violeta.jpeg",
                "Verde": "remera-verde.jpeg",
                "Bordo": "remera-bordo.jpeg",
                "The North Face": "north-face.png"
            }, 
            sizes: ["S", "M", "L", "XL"], 
            colors: ["Violeta", "Marron", "Negro", "Blanco", "Gris", "Verde", "Bordo"],
            estampa: ["Sin estampado", "The North Face"]
        },
        9: { 
            name: "Buzo Canguro", 
            price: 26999, 
            images: {
                "Negro": "buzocanguro-negro.jpeg",
                "The North Face": "north-face.png"
            }, 
            sizes: ["S", "M", "L", "XL"], 
            colors: ["Negro"],
            estampa: ["Sin estampado", "The North Face"]
        },
        11: { 
            name: "Pantalon Cargo Baggy", 
            price: 29999, 
            images: {
                "Negro": "pantaloncargo.jpeg"
            }, 
            sizes: ["38", "39", "40", "41", "42", "43", "44", "46", "48"], 
            colors: ["Negro"] 
        },
        14: { 
            name: "Calza One Leg", 
            price: 20999, 
            images: {
                "Negro": "assets/products/calza-one-leg.jpg"
            }, 
            sizes: ["S", "M", "L", "XL"], 
            colors: ["Negro"] 
        },
        15: { 
            name: "Calza Larga Mujer", 
            price: 20999, 
            images: {
                "Negro": "calzalarga.png"
            }, 
            sizes: ["S", "M", "L", "XL"], 
            colors: ["Negro"] 
        },
        19: { 
            name: "Calza Corta Deportiva Mujer", 
            price: 5990, 
            images: {
                "Negro": "assets/products/calza-corta-mujer.jpg"
            }, 
            sizes: ["XS", "S", "M", "L"], 
            colors: ["Negro"] 
        },
        28: { 
            name: "Pantal√≥n cargo alto con strass", 
            price: 71000, 
            images: {
                "Fucsia": "assets/products/pantalon-cargo-strass-fucsia.jpg",
                "Verde": "assets/products/pantalon-cargo-strass-verde.jpg"
            }, 
            sizes: ["S", "M", "L", "XL"], 
            colors: ["Fucsia", "Verde"] 
        },
        29: { 
            name: "Remera con malla transparente", 
            price: 20000, 
            images: {
                "Blanco": "assets/products/remera-malla.jpg"
            }, 
            sizes: ["S", "M"], 
            colors: ["Blanco"] 
        },
        32: { 
            name: "Top sat√©n liso con tirantes finos", 
            price: 21000, 
            images: {
                "Negro": "assets/products/top-saten-negro.jpg",
                "Rojo": "assets/products/top-saten-rojo.jpg"
            }, 
            sizes: ["S", "M"], 
            colors: ["Negro", "Rojo"] 
        },
        33: { 
            name: "Jogging Oversize", 
            price: 24990, 
            images: {
                "Negro": "jogging.jpg",
                "Blanco": "joggingblanco.jpg"
            }, 
            sizes: ["S", "M", "L"], 
            colors: ["Negro", "Marron", "Verde", "Gris", "Blanco", "Azul"] 
        },
        37: { 
            name: "Jean wide leg animal print", 
            price: 24999, 
            images: {
                "Blanco": "assets/products/jean-animal-blanco.jpg",
                "Negro": "assets/products/jean-animal-negro.jpg"
            }, 
            sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46"], 
            colors: ["Blanco", "Negro"] 
        },
        39: { 
            name: "Top bandeau plisado sin tirantes", 
            price: 18000, 
            images: {
                "Rosa": "assets/products/top-bandeau.jpg"
            }, 
            sizes: ["S", "M"], 
            colors: ["Rosa"] 
        }
    };
    return productos[id];
}

        function mostrarProducto(producto) {
            // Determinar la imagen a mostrar (compatibilidad con versiones anteriores)
            let imagenMostrar = producto.image;
            if (producto.images) {
                const primerColor = producto.colors[0];
                imagenMostrar = producto.images[primerColor] || producto.image;
            }
            
            document.getElementById('producto-imagen').src = imagenMostrar;
            document.getElementById('producto-nombre').textContent = producto.name;
            document.getElementById('producto-precio').textContent = `$${producto.price.toLocaleString('es-AR')}`;
            document.getElementById('producto-descripcion').textContent = producto.description || "Producto exclusivo GUZZOCORP, para Finalizar la Compra tenes que completar todos los campos, si tenes algun problema o duda escribi al 266 4008 408";
            
            // Llenar talles
            const selectTalle = document.getElementById('talle');
            selectTalle.innerHTML = '';
            producto.sizes.forEach(talle => {
                const option = document.createElement('option');
                option.value = talle;
                option.textContent = talle;
                selectTalle.appendChild(option);
            });
            
            // Llenar colores
            const selectColor = document.getElementById('color');
            selectColor.innerHTML = '';
            producto.colors.forEach(color => {
                const option = document.createElement('option');
                option.value = color;
                option.textContent = color;
                selectColor.appendChild(option);
            });
            
// Manejar estampas
const estampaContainer = document.querySelector('label[for="estampa"]').parentElement;
const selectEstampa = document.getElementById('estampa');

if (producto.estampa && producto.estampa.length > 0) {
    estampaContainer.style.display = 'block';
    selectEstampa.innerHTML = '';
    selectEstampa.required = true;
    
    producto.estampa.forEach(estampa => {
        const option = document.createElement('option');
        option.value = estampa;
        option.textContent = estampa;
        selectEstampa.appendChild(option);
    });
} else {
    estampaContainer.style.display = 'none';
    selectEstampa.required = false;
}
        }

        function configurarFormulario(producto) {
            const form = document.getElementById('form-compra');
            const selectColor = document.getElementById('color');
            const selectEstampa = document.getElementById('estampa');
            const imagenProducto = document.getElementById('producto-imagen');
            const imagenEstampa = document.getElementById('producto-estampa');
            
            // Actualizar imagen cuando cambia el color
            selectColor.addEventListener('change', function() {
                const colorSeleccionado = this.value;
                
                // Efecto de transici√≥n
                imagenProducto.style.opacity = 0;
                
                setTimeout(() => {
                    // Opci√≥n 1: Productos con im√°genes por color
                    if (producto.images && producto.images[colorSeleccionado]) {
                        imagenProducto.src = producto.images[colorSeleccionado];
                    } 
                    // Opci√≥n 2: Productos con imagen √∫nica (compatibilidad)
                    else if (producto.image) {
                        imagenProducto.src = producto.image;
                    }
                    
                    imagenProducto.style.opacity = 1;
                }, 300);
            });
            
// Actualizar estampa cuando cambia la selecci√≥n (solo si existe)
if (selectEstampa && producto.estampa && producto.estampa.length > 0) {
    selectEstampa.addEventListener('change', function() {
        const estampaSeleccionada = this.value;
        
        if (estampaSeleccionada === "Sin estampado" || !producto.images || !producto.images[estampaSeleccionada]) {
            imagenEstampa.style.display = 'none';
        } else {
            imagenEstampa.style.display = 'block';
            imagenEstampa.src = producto.images[estampaSeleccionada];
        }
        
        actualizarResumen();
    });
}

// Actualizar resumen al cambiar opciones
form.addEventListener('change', actualizarResumen);
form.addEventListener('submit', enviarWhatsApp);
            
function actualizarResumen() {
    const producto = obtenerProducto(parseInt(new URLSearchParams(window.location.search).get('producto')));
    if (!producto) return;
    
    const cantidad = parseInt(document.getElementById('cantidad').value) || 1;
    const calidad = document.getElementById('calidad').value;
    const talle = document.getElementById('talle').value;
    const color = document.getElementById('color').value;
    const metodoPago = document.getElementById('metodo-pago').value;
    const cuotas = document.getElementById('cuotas') ? parseInt(document.getElementById('cuotas').value) : 1;
    
// Obtener estampa solo si existe
let estampa = '';
if (selectEstampa && selectEstampa.style.display !== 'none') {
    estampa = selectEstampa.value;
}
    
    // Calcular precios seg√∫n calidad (19% m√°s para premium)
    let precioBase = producto.price;
    let calidadTexto = 'Regular de Guzzo Corp (Alta Calidad)';
    if (calidad === "premium") {
        precioBase = Math.round(producto.price * 1.19);
        calidadTexto = 'Premium de Guzzo Corp (+19%)';
    }
    
    // Calcular descuentos
    let descuento = 0;
    if (cantidad >= 3) descuento = 10;
    else if (cantidad >= 2) descuento = 3;

    // Descuento por pago en efectivo
    if(metodoPago === 'Efectivo') descuento += 6;
    
    let total = precioBase * cantidad * (1 - descuento/100);
    
    // Aplicar recargo por cuotas
    let detalleCuotas = '';
    if (metodoPago === 'Tarjeta') {
        let recargoPorcentaje = 0;
        switch (cuotas) {
            case 1: recargoPorcentaje = 4; break;
            case 2: recargoPorcentaje = 18; break;
            case 3: recargoPorcentaje = 23; break;
            case 6: recargoPorcentaje = 40; break;
            case 9: recargoPorcentaje = 63; break;
            case 12: recargoPorcentaje = 86; break;
        }
        total *= (1 + recargoPorcentaje / 100);
        detalleCuotas = `<p>${cuotas} cuotas (+${recargoPorcentaje}%)</p>`;
    }
    
    // Construir el resumen
    let resumenHTML = `
        <p>${cantidad} x ${producto.name}</p>
        <p>Calidad: ${calidadTexto}</p>
        <p>Talle: ${talle}</p>
        <p>Color: ${color}</p>
    `;
    
    // Agregar estampa solo si existe
    if (producto.estampa && producto.estampa.length > 0) {
        resumenHTML += `<p>Estampa: ${estampa}</p>`;
    }
    
    resumenHTML += `
        <p>Precio unitario: $${precioBase.toLocaleString('es-AR')}</p>
        ${descuento > 0 ? `<p>Descuento: ${descuento}%</p>` : ''}
        ${metodoPago === 'Tarjeta' ? detalleCuotas : ''}
        <p>M√©todo de pago: ${metodoPago || 'No seleccionado'}</p>
        <p class="total">Total: $${total.toLocaleString('es-AR')}</p>
    `;
    
    document.getElementById('resumen-detalle').innerHTML = resumenHTML;
}

            function enviarWhatsApp(e) {
                e.preventDefault();
                
                // Validar que todos los campos requeridos est√©n completos
                const form = document.getElementById('form-compra');
                const requiredFields = form.querySelectorAll('[required]');
                let isValid = true;
                
                requiredFields.forEach(field => {
                    if (!field.value) {
                        field.style.border = '1px solid red';
                        isValid = false;
                    } else {
                        field.style.border = '';
                    }
                });
                
                if (!isValid) {
                    alert('Por favor complete todos los campos requeridos');
                    return;
                }
                
                // Obtener valores del formulario
                const cantidad = parseInt(document.getElementById('cantidad').value) || 1;
                const calidad = document.getElementById('calidad').value;
                const talle = document.getElementById('talle').value;
                const color = document.getElementById('color').value;
                const estampa = document.getElementById('estampa').value;
                const metodoPago = document.getElementById('metodo-pago').value;
                const cuotas = document.getElementById('cuotas') ? parseInt(document.getElementById('cuotas').value) : 1;
                const notas = document.getElementById('notas').value;
                
                // Calcular precios seg√∫n calidad (19% m√°s para premium)
                let precioBase = producto.price;
                let calidadTexto = 'Regular de Guzzo (Alta Calidad)';
                if (calidad === "premium") {
                    precioBase = Math.round(producto.price * 1.19);
                    calidadTexto = 'Premium de Guzzo (+19%)';
                }
                
                // Calcular descuentos
                let descuento = 0;
                if (cantidad >= 3) descuento = 10;
                else if (cantidad >= 2) descuento = 3;
                
                // Descuento por pago en efectivo
                if(metodoPago === 'Efectivo') descuento += 6;
                
                let total = precioBase * cantidad * (1 - descuento/100);
                
                // Aplicar recargo por cuotas solo para Tarjeta
                if(metodoPago === 'Tarjeta') {
                    let recargoPorcentaje = 0;
                    switch (cuotas) {
                        case 1: recargoPorcentaje = 4; break;
                        case 2: recargoPorcentaje = 18; break;
                        case 3: recargoPorcentaje = 23; break;
                        case 6: recargoPorcentaje = 40; break;
                        case 9: recargoPorcentaje = 63; break;
                        case 12: recargoPorcentaje = 86; break;
                    }
                    total *= (1 + recargoPorcentaje / 100);
                }
                
                // Construir mensaje
                const mensaje = `¬°Hola GUZZOCORP! üëã\n\nQuiero comprar:\n\n*Producto:* ${producto.name}\n*Calidad:* ${calidadTexto}\n*Talle:* ${talle}\n*Color:* ${color}\n${
                    producto.estampa ? `*Estampa:* ${estampa}\n` : ''
                }*Cantidad:* ${cantidad}\n*Precio unitario:* $${precioBase.toLocaleString('es-AR')}\n${
                    descuento > 0 ? `*Descuento:* ${descuento}%\n` : ''
                }${
                    metodoPago === 'Tarjeta' ? `*Cuotas:* ${cuotas}\n` : ''
                }*M√©todo de pago:* ${metodoPago}\n*Total:* $${total.toLocaleString('es-AR')}${
                    notas ? `\n\n*Notas adicionales (opcional):*\n${notas}` : ''
                }\n\n[Ver producto](${producto.images ? producto.images[color] || producto.image : producto.image})`;
                
                // Codificar el mensaje para URL
                const mensajeCodificado = encodeURIComponent(mensaje);
                
                // Redirigir a WhatsApp con el n√∫mero correcto (54 es c√≥digo de Argentina, 266 es c√≥digo de √°rea)
                window.location.href = `https://wa.me/5492664008408?text=${mensajeCodificado}`;
            }
            
            // Inicializar resumen
            actualizarResumen();
        }

        function mostrarError() {
            document.querySelector('.personalizar-container').innerHTML = `
                <div class="error">
                    <p>No se encontr√≥ el producto</p>
                    <a href="catalogo.html" class="btn">Volver al cat√°logo</a>
                </div>
            `;
        }

        function toggleGuiaTalles() {
            const content = document.getElementById('guia-talles-content');
            const icon = document.getElementById('guia-icon');
            
            if (content.style.display === 'block') {
                content.style.display = 'none';
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            } else {
                content.style.display = 'block';
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            }
        }
    </script>
</body>
</html>
