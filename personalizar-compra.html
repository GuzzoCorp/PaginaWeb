<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalizar Compra - GUZZOCORP</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
    <div class="logo-container">
        <img src="GuzzoCorp.png" alt="GUZZOCORP" class="logo">
        <span class="logo-text">GUZZO CORPORATION</span>
    </div>
<nav>
    <a href="inicio.html"><i class="fas fa-home"></i> Inicio</a>
    <a href="index.html"><i class="fas fa-tshirt"></i> Tienda</a>
    <a href="catalogo.html"><i class="fas fa-search"></i> Catálogo</a>
    <a href="encargos.html"><i class="fas fa-star"></i> Encargos</a>
    <a href="#contacto"><i class="fas fa-envelope"></i> Contacto</a>
</nav>
    <div class="mobile-menu-btn">
        <i class="fas fa-bars"></i>
    </div>
</header>
    
    <div class="personalizar-container">
        <h1 class="titulo-centrado">Personaliza tu compra</h1>
        
        <div class="producto-content">
            <!-- Imagen del producto (izquierda) -->
            <div class="producto-imagen-container">
                <img id="producto-imagen" src="" alt="Producto" class="producto-img">
            </div>
            
            <!-- Información y selección (centro) -->
            <div class="producto-seleccion">
                <h2 id="producto-nombre"></h2>
                <p id="producto-precio" class="precio"></p>
                <p id="producto-descripcion" class="descripcion"></p>
                
                <form id="form-compra">

                    <!-- Nueva sección de beneficios -->
    <div class="beneficios-compra">
        <div class="beneficio-item">
            <i class="fas fa-tags"></i>
            <div>
                <h4>¡Más compras, más ahorro!</h4>
                <p>2 productos: 3% OFF | 3+ productos: 10% OFF</p>
            </div>
        </div>
        <div class="beneficio-item">
            <i class="fas fa-money-bill-wave"></i>
            <div>
                <h4>Efectivo: 10% de Descuento</h4>
                <p>Pagando en efectivo</p>
            </div>
        </div>
    </div>

    <form id="form-compra">
        <!-- Selector de calidad -->
        <div class="selector">
            <label for="calidad">Calidad:</label>
            <select id="calidad" name="calidad" required>
                <option value="">Elige una opción</option>
                <option value="regular">Regular (Alta calidad)</option>
                <option value="premium">Premium (+19% mejor calidad)</option>
            </select>
        </div>
                    
                    <!-- Selección de talle -->
                    <div class="selector">
                        <label for="talle">Talle:</label>
                        <select id="talle" name="talle" required></select>
                    </div>
                    
                    <!-- Selección de color -->
                    <div class="selector">
                        <label for="color">Color:</label>
                        <select id="color" name="color" required></select>
                    </div>
                    
                    <!-- Cantidad -->
                    <div class="selector">
                        <label for="cantidad">Cantidad:</label>
                        <input type="number" id="cantidad" min="1" value="1" required>
                    </div>

                    <!-- Método de pago -->
                    <div class="selector">
                        <label for="metodo-pago">Método de pago:</label>
                        <select id="metodo-pago" name="metodo-pago" required>
                            <option value="">Seleccionar</option>
                            <option value="Efectivo">Efectivo (10% descuento)</option>
                            <option value="Transferencia">Transferencia bancaria</option>
                            <option value="MercadoPago">Mercado Pago</option>
                            <option value="Cripto">Criptomonedas</option>
                        </select>
                    </div>

                    <!-- Cuotas -->
                    <div class="selector" id="cuotas-container" style="display:none;">
                        <label for="cuotas">Cuotas:</label>
                        <select id="cuotas" name="cuotas">
                            <option value="1">1 cuota (sin interés)</option>
                            <option value="3">3 cuotas (+10%)</option>
                            <option value="6">6 cuotas (+20%)</option>
                        </select>
                    </div>

                    <div class="selector">
    <label for="notas">Notas adicionales <span class="opcional">(Opcional)</span>:</label>
    <textarea id="notas" name="notas" rows="3"></textarea>
</div>
                </form>
            </div>
            
            <!-- Resumen de compra (derecha) -->
            <div class="resumen-section">
                <div class="resumen-compra">
                    <h3>Resumen de compra</h3>
                    <div id="resumen-detalle"></div>
                </div>
                <button type="submit" form="form-compra" class="btn-comprar">
                    <i class="fab fa-whatsapp"></i> Finalizar Compra
                </button>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-logo-container">
            <img src="GuzzoCorp.png" alt="GUZZOCORP" class="footer-logo">
            <span class="footer-logo-text">THE BEST STYLE</span>
        </div>
        <div class="footer-links">
            <a href="#inicio">Inicio</a>
            <a href="#sneakers">Sneakers</a>
            <a href="#ropa">Ropa</a>
            <a href="#encargos">Encargos</a>
            <a href="#contacto">Contacto</a>
        </div>
        <div class="social-links">
            <a href="https://www.instagram.com/guzzo.corp" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://wa.me/5492664633010" target="_blank"><i class="fab fa-whatsapp"></i></a>
            <a href="mailto:guzzoinbusiness@gmail.com" target="_blank"><i class="fas fa-envelope"></i></a>
        </div>
        <div class="copyright">
            &copy; 2025 GUZZOCORP - Todos los derechos reservados - By: Nahuel Guzzo
        </div>
    </footer>

    <script>
        // Cargar datos del producto
        document.addEventListener('DOMContentLoaded', function() {
            // Menú móvil
            const menuBtn = document.querySelector('.mobile-menu-btn');
            const nav = document.querySelector('nav');
            
            menuBtn.addEventListener('click', function() {
                nav.classList.toggle('active');
            });
            
            // Mostrar/ocultar cuotas según método de pago
            const metodoPago = document.getElementById('metodo-pago');
            const cuotasContainer = document.getElementById('cuotas-container');
            
            metodoPago.addEventListener('change', function() {
                if(this.value === 'MercadoPago') {
                    cuotasContainer.style.display = 'block';
                } else {
                    cuotasContainer.style.display = 'none';
                }
                actualizarResumen();
            });
            
            // Cargar producto
            const urlParams = new URLSearchParams(window.location.search);
            const productId = parseInt(urlParams.get('producto'));
            
            // Obtener producto del catálogo
            const producto = obtenerProducto(productId);
            
            if (producto) {
                mostrarProducto(producto);
                configurarFormulario(producto);
            } else {
                mostrarError();
            }
        });
        
        function obtenerProducto(id) {
            const productos = {
                1: { name: "Remera Térmica", price: 14999, image: "Termica.jpeg", sizes: ["S", "M", "L", "XL", "XXL"], colors: ["Negro"] },
                2: { name: "Gorra", price: 24999, image: "Gorras.jpeg", sizes: ["Único"], colors: ["Negro", "Azul"] },
            };
            return productos[id];
        }
        
        function mostrarProducto(producto) {
            document.getElementById('producto-imagen').src = producto.image;
            document.getElementById('producto-nombre').textContent = producto.name;
            document.getElementById('producto-precio').textContent = `$${producto.price.toLocaleString('es-AR')}`;
            document.getElementById('producto-descripcion').textContent = producto.description || "Producto exclusivo GUZZOCORP";
            
            // Llenar talles
            const selectTalle = document.getElementById('talle');
            producto.sizes.forEach(talle => {
                const option = document.createElement('option');
                option.value = talle;
                option.textContent = talle;
                selectTalle.appendChild(option);
            });
            
            // Llenar colores
            const selectColor = document.getElementById('color');
            producto.colors.forEach(color => {
                const option = document.createElement('option');
                option.value = color;
                option.textContent = color;
                selectColor.appendChild(option);
            });
        }
        
        function configurarFormulario(producto) {
            const form = document.getElementById('form-compra');
            
            // Actualizar resumen al cambiar opciones
            form.addEventListener('change', actualizarResumen);
            form.addEventListener('submit', enviarWhatsApp);
            
function actualizarResumen() {
    const cantidad = parseInt(document.getElementById('cantidad').value) || 1;
    const calidad = document.getElementById('calidad').value;
    const talle = document.getElementById('talle').value;
    const color = document.getElementById('color').value;
    const metodoPago = document.getElementById('metodo-pago').value;
    const cuotas = document.getElementById('cuotas') ? parseInt(document.getElementById('cuotas').value) : 1;
    
    // Calcular precios según calidad (19% más para premium)
    let precioBase = producto.price;
    let calidadTexto = 'Regular de Guzzo Corp (Alta Calidad)';
    if (calidad === "premium") {
        precioBase = Math.round(producto.price * 1.19); // 19% más para calidad premium
        calidadTexto = 'Premium de Guzzo Corp (+19%)';
    }
    
    // Calcular descuentos
    let descuento = 0;
    if (cantidad >= 3) descuento = 10;
    else if (cantidad >= 2) descuento = 3;
    
    // Descuento por pago en efectivo
    if(metodoPago === 'Efectivo') descuento += 10;
    
    let total = precioBase * cantidad * (1 - descuento/100);
    
    // Aplicar recargo por cuotas
    if(metodoPago === 'MercadoPago') {
        if(cuotas === 3) total *= 1.10;
        if(cuotas === 6) total *= 1.20;
    }
    
    document.getElementById('resumen-detalle').innerHTML = `
        <p>${cantidad} x ${producto.name}</p>
        <p>Calidad: ${calidadTexto}</p>
        <p>Talle: ${talle}</p>
        <p>Color: ${color}</p>
        <p>Precio unitario: $${precioBase.toLocaleString('es-AR')}</p>
        ${descuento > 0 ? `<p>Descuento: ${descuento}%</p>` : ''}
        ${metodoPago === 'MercadoPago' ? `<p>${cuotas} cuotas</p>` : ''}
        <p>Método de pago: ${metodoPago || 'No seleccionado'}</p>
        <p class="total">Total: $${total.toLocaleString('es-AR')}</p>
    `;
}

function enviarWhatsApp(e) {
    e.preventDefault();
    
    const cantidad = parseInt(document.getElementById('cantidad').value) || 1;
    const calidad = document.getElementById('calidad').value;
    const talle = document.getElementById('talle').value;
    const color = document.getElementById('color').value;
    const metodoPago = document.getElementById('metodo-pago').value;
    const cuotas = document.getElementById('cuotas') ? parseInt(document.getElementById('cuotas').value) : 1;
    const notas = document.getElementById('notas').value;
    
    // Calcular precios según calidad (19% más para premium)
    let precioBase = producto.price;
    let calidadTexto = 'Regular de Guzzo (Alta Calidad)';
    if (calidad === "premium") {
        precioBase = Math.round(producto.price * 1.19); // 19% más para calidad premium
        calidadTexto = 'Premium de Guzzo (+19%)';
    }
    
    // Calcular descuentos
    let descuento = 0;
    if (cantidad >= 3) descuento = 10;
    else if (cantidad >= 2) descuento = 3;
    
    // Descuento por pago en efectivo
    if(metodoPago === 'Efectivo') descuento += 10;
    
    let total = precioBase * cantidad * (1 - descuento/100);
    
    // Aplicar recargo por cuotas
    if(metodoPago === 'MercadoPago') {
        if(cuotas === 3) total *= 1.10;
        if(cuotas === 6) total *= 1.20;
    }
                
    const mensaje = `¡Hola GUZZOCORP! 👋\n\nQuiero comprar:\n\n*Producto:* ${producto.name}\n*Calidad:* ${calidadTexto}\n*Talle:* ${talle}\n*Color:* ${color}\n*Cantidad:* ${cantidad}\n*Precio unitario:* $${precioBase.toLocaleString('es-AR')}\n${descuento > 0 ? `*Descuento:* ${descuento}%\n` : ''}${metodoPago === 'MercadoPago' ? `*Cuotas:* ${cuotas}\n` : ''}*Método de pago:* ${metodoPago}\n*Total:* $${total.toLocaleString('es-AR')}${notas ? `\n\n*Notas adicionales (opcional):*\n${notas}` : ''}\n\n[Ver producto](${producto.image})`;
    window.open(`https://wa.me/5492664633010?text=${encodeURIComponent(mensaje)}`, '_blank');
            }
            
            // Inicializar resumen
            actualizarResumen();
        }
        
        function mostrarError() {
            document.querySelector('.personalizar-container').innerHTML = `
                <div class="error">
                    <p>No se encontró el producto</p>
                    <a href="catalogo.html" class="btn">Volver al catálogo</a>
                </div>
            `;
        }
    </script>
</body>
</html>
